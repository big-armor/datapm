<div *ngIf="packageFile?.readmeMarkdown" class="pb-4">
    <div [class.limitTextHeight]="shouldShowMoreReadMeButton && !isShowingMoreReadMeText">
        <markdown [data]="packageFile?.readmeMarkdown"></markdown>
    </div>
    <div class="fade-out" [class.d-none]="!shouldShowMoreReadMeButton || isShowingMoreReadMeText"></div>
    <p class="text-center mt-3" *ngIf="shouldShowMoreReadMeButton">
        <a class="app-outlined-button" (click)="toggleShowMoreReadMeText()">
            {{ isShowingMoreReadMeText ? "Show Less" : "Show More" }}
        </a>
    </p>
    <div class="text-dark-gray">
        <a class="color-info cursor-pointer" (click)="editLicense()" *ngIf="canManage()">edit readme</a>
    </div>
</div>

<div *ngIf="packageFile?.licenseMarkdown" class="pb-4">
    <div [class.limitTextHeight]="shouldShowMoreLicenseButton && !isShowingMoreLicenseText">
        <markdown [data]="packageFile?.licenseMarkdown"></markdown>
    </div>
    <div class="fade-out" [class.d-none]="!shouldShowMoreLicenseButton || isShowingMoreLicenseText"></div>
    <p class="text-center mt-3" *ngIf="shouldShowMoreLicenseButton">
        <a class="app-outlined-button" (click)="toggleShowMoreLicenseText()">
            {{ isShowingMoreLicenseText ? "Show Less" : "Show More" }}
        </a>
    </p>
    <div class="text-dark-gray">
        <a class="color-info cursor-pointer" (click)="editLicense()" *ngIf="canManage()">edit license</a>
    </div>
</div>
<h1>Preview</h1>

<div *ngIf="schemas?.length > 1">
    <mat-select (selectionChange)="selectSchema($event.value)" [value]="selectedSchema">
        <mat-option *ngFor="let schema of schemas" [value]="schema">
            {{ schema.title }}
        </mat-option>
    </mat-select>
</div>

<ng-container *ngIf="packageFile">
    <div class="mb-150">
        <samples [package]="package" [schema]="selectedSchema"></samples>
    </div>
</ng-container>

<ng-container *ngIf="packageFile">
    <div class="mt-4 py-2">
        <div class="text-main-title mb-1">Schema</div>
        <div *ngIf="schemas?.length > 1">
            <mat-select (selectionChange)="selectSchema($event.value)" [value]="selectedSchema">
                <mat-option *ngFor="let schema of schemas" [value]="schema">
                    {{ schema.title }}
                </mat-option>
            </mat-select>
        </div>
        <schema [schema]="selectedSchema"></schema>
    </div>
</ng-container>

<ng-container *ngIf="collections?.length">
    <div class="related-data-div mt-5">
        <div class="text-main-title mt-4 pt-2 mb-2">Related Data</div>
        <div class="text-dark-gray">Other data that are related to this package</div>
        <ul class="ul-data">
            <li *ngFor="let collection of collections">
                <a class="text-dark-gray ul-links" (click)="goToCollection(collection.identifier.collectionSlug)">{{
                    collection.name
                }}</a>
                <p class="text-light-gray" [class.p-width]="collection.description">{{ collection.description }}</p>
            </li>
        </ul>
    </div>
</ng-container>
